<!DOCTYPE html>
<html lang="en">
  <head>
    <title>8 Queens GA</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.rtl.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <div class="row m-0">
      <div
        class="col-12 p-0 d-flex justify-content-center align-items-center flex-column"
      >
        <button
          type="button"
          class="btn btn-outline-primary w-50"
          onclick="createUI()"
        >
          Reset
        </button>
        <!-- ga -->
        <h2 class="mt-2">Genetic algorithm</h2>
        <div
          id="log_ga"
          class="w-50 mt-2 text-center d-flex justify-content-around align-items-center"
        ></div>
        <div id="plot_ga"></div>
        <!-- hill -->
        <h2 class="mt-4">Hill climbing algorithm</h2>
        <div
          id="log_hill"
          class="w-50 mt-2 text-center d-flex justify-content-around align-items-center"
        ></div>
        <div id="plot_hill"></div>
      </div>
    </div>
  </body>
</html>
<script src="assets/js/genetic.js"></script>
<script src="assets/js/hill-climbing.js"></script>
<script>
  createUI();
  function createUI() {
    createUI_hill();
    createUI_ga();
  }
  function createUI_ga() {
    const end_idx = init_ga();

    var plotElement = document.getElementById("plot_ga");
    plotElement.innerHTML = "";
    for (let i = 0; i < 8; i++) {
      for (let j = 0; j < 8; j++) {
        var square = document.createElement("div");
        square.id = `square_ga_${i}_${j}`;
        if (i % 2 === 0 && j % 2 !== 0) {
          square.style.backgroundColor = "black";
        } else if (i % 2 !== 0 && j % 2 === 0) {
          square.style.backgroundColor = "black";
        }

        plotElement.appendChild(square);
      }
    }

    var result = population[0];
    for (let k = 0; k < result.col.length; k++) {
      var square = document.querySelector(`#square_ga_${result.col[k]}_${k}`);
      square.style.backgroundImage = "url('./assets/images/queen.png')";
    }

    var fitness = document.getElementById("log_ga");
    fitness.innerHTML = `<div><h3>Errors</h3><h4>${result.fitness}</h4></div><div><h3>Turn</h3><h4>${end_idx}</h4></div>`;
    plotElement.style.backgroundColor = "white";
    if (!result.fitness) {
      plotElement.style.backgroundColor = "green";
    }
  }
  function createUI_hill() {
    var result = init_hill();

    var plotElement = document.getElementById("plot_hill");
    plotElement.innerHTML = "";
    for (let i = 0; i < 8; i++) {
      for (let j = 0; j < 8; j++) {
        var square = document.createElement("div");
        square.id = `square_hill_${i}_${j}`;
        if (i % 2 === 0 && j % 2 !== 0) {
          square.style.backgroundColor = "black";
        } else if (i % 2 !== 0 && j % 2 === 0) {
          square.style.backgroundColor = "black";
        }

        plotElement.appendChild(square);
      }
    }

    for (let k = 0; k < result.col.length; k++) {
      var square = document.querySelector(`#square_hill_${result.col[k]}_${k}`);
      square.style.backgroundImage = "url('./assets/images/queen.png')";
    }

    var fitness = document.getElementById("log_hill");
    fitness.innerHTML = `<div><h3>Errors</h3><h4>${result.fitness}</h4></div>`;
    plotElement.style.backgroundColor = "white";
    if (!result.fitness) {
      plotElement.style.backgroundColor = "green";
    }
  }
</script>
